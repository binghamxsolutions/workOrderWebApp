{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class WorkOrderService {\n  constructor(http, baseUrl) {\n    this.http = http;\n    this.httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      })\n    };\n    this.base = baseUrl;\n  }\n  /**\r\n   * Retrieves all items from the workorder table\r\n   * @returns An `Obseverable` array of type `WorkOrder`\r\n   */\n  getWorkOrders() {\n    return this.http.get(this.base + \"workorder/getworkorders\", this.httpOptions).pipe(catchError(this.handleError('getWorkOrders', [])));\n  }\n  /**\r\n   * Retrieves the filtered work order list from the database by matching the\r\n   * status\r\n   * @param techId This will be the filter for the returned list\r\n   * @returns An `Obseverable` array of type `WorkOrder`\r\n   */\n  getFilteredWorkOrders(status) {\n    return this.http.get(this.base + \"workorder/getworkordersbystatus?status=\" + status).pipe(catchError(this.handleError('getFilteredWorkOrders', [])));\n  }\n  getTechOrders(id) {\n    return this.http.get(this.base + \"workorder/gettechorders?id=\" + id).pipe(catchError(this.handleError('getTechOrders', [])));\n  }\n  /**\r\n   * Retrieves a list of work order statuses\r\n   * available in the database\r\n   * @returns A string array of values if any are present\r\n   */\n  getStatuses() {\n    return this.http.get(this.base + \"workorder/getstatuses\").pipe(catchError(this.handleError('getStatuses', [])));\n  }\n  /**\r\n   *\r\n   * @param id Serves as a filter to aid with web app routing\r\n   * @returns\r\n   */\n  getWorkOrder(id) {\n    return this.http.get(this.base + 'workorder/getworkorder?id=' + id).pipe(catchError(this.handleError('getWorkOrder woId = ${id}')));\n  }\n  createWorkOrder(workOrder) {\n    this.http.post(this.base + 'workorder/createneworder', this.httpOptions);\n  }\n  /**\r\n   * Handles errors from back-end requests to allow the app to still\r\n   * run without crashing\r\n   * @param operation\r\n   * @param result\r\n   * @returns\r\n   */\n  handleError(operation = 'operation', result) {\n    return error => {\n      return of(result);\n    };\n  } //code sourced from: https://angular.io/tutorial/tour-of-heroes/toh-pt6#heroes-and-http\n}\nWorkOrderService.ɵfac = function WorkOrderService_Factory(t) {\n  return new (t || WorkOrderService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject('BASE_URL'));\n};\nWorkOrderService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: WorkOrderService,\n  factory: WorkOrderService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AACA,SAAqBA,WAAW,QAAQ,sBAAsB;AAC9D,SAAqBC,EAAE,QAAQ,MAAM;AACrC,SAASC,UAAU,QAAkB,gBAAgB;;;AAOrD,OAAM,MAAOC,gBAAgB;EAS3BC,YAAoBC,IAAgB,EAAsBC,OAAe;IAArD,SAAI,GAAJD,IAAI;IARxB,gBAAW,GAAG;MACZE,OAAO,EAAE,IAAIP,WAAW,CAAC;QACvB,cAAc,EAAE,kBAAkB;QAClC,6BAA6B,EAAE;OAChC;KACF;IAG4E,IAAI,CAACQ,IAAI,GAAGF,OAAO;EAAE;EAGlG;;;;EAIAG,aAAa;IACX,OAAO,IAAI,CAACJ,IAAI,CAACK,GAAG,CAAc,IAAI,CAACF,IAAI,GAAG,yBAAyB,EAAE,IAAI,CAACG,WAAW,CAAC,CAACC,IAAI,CAC7FV,UAAU,CAAC,IAAI,CAACW,WAAW,CAAc,eAAe,EAAE,EAAE,CAAC,CAAC,CAC/D;EACH;EAEA;;;;;;EAMAC,qBAAqB,CAACC,MAAc;IAClC,OAAO,IAAI,CAACV,IAAI,CAACK,GAAG,CAAc,IAAI,CAACF,IAAI,GAAG,yCAAyC,GAAGO,MAAM,CAAC,CAACH,IAAI,CACpGV,UAAU,CAAC,IAAI,CAACW,WAAW,CAAc,uBAAuB,EAAE,EAAE,CAAC,CAAC,CACvE;EACH;EAEAG,aAAa,CAACC,EAAU;IACtB,OAAO,IAAI,CAACZ,IAAI,CAACK,GAAG,CAAc,IAAI,CAACF,IAAI,GAAG,6BAA6B,GAAGS,EAAE,CAAC,CAACL,IAAI,CACpFV,UAAU,CAAC,IAAI,CAACW,WAAW,CAAc,eAAe,EAAE,EAAE,CAAC,CAAC,CAC/D;EACH;EAEA;;;;;EAKAK,WAAW;IACT,OAAO,IAAI,CAACb,IAAI,CAACK,GAAG,CAAW,IAAI,CAACF,IAAI,GAAG,uBAAuB,CAAC,CAACI,IAAI,CACtEV,UAAU,CAAC,IAAI,CAACW,WAAW,CAAW,aAAa,EAAE,EAAE,CAAC,CAAC,CAC1D;EACH;EAEA;;;;;EAKAM,YAAY,CAACF,EAAU;IACrB,OAAO,IAAI,CAACZ,IAAI,CAACK,GAAG,CAAY,IAAI,CAACF,IAAI,GAAG,4BAA4B,GAAGS,EAAE,CAAC,CAACL,IAAI,CACjFV,UAAU,CAAC,IAAI,CAACW,WAAW,CAAY,2BAA2B,CAAC,CAAC,CACrE;EACH;EAEAO,eAAe,CAACC,SAAoB;IAClC,IAAI,CAAChB,IAAI,CAACiB,IAAI,CAAY,IAAI,CAACd,IAAI,GAAG,0BAA0B,EAAE,IAAI,CAACG,WAAW,CAAC;EACrF;EAEA;;;;;;;EAOQE,WAAW,CAAIU,SAAS,GAAG,WAAW,EAAEC,MAAU;IACxD,OAAQC,KAAU,IAAmB;MAAG,OAAOxB,EAAE,CAACuB,MAAW,CAAC;IAAC,CAAC;EAClE,CAAC,CAAC;;AA3ESrB,gBAAgB;mBAAhBA,gBAAgB,0CASmB,UAAU;AAAA;AAT7CA,gBAAgB;SAAhBA,gBAAgB;EAAAuB,SAAhBvB,gBAAgB;EAAAwB,YAFf;AAAM","names":["HttpHeaders","of","catchError","WorkOrderService","constructor","http","baseUrl","headers","base","getWorkOrders","get","httpOptions","pipe","handleError","getFilteredWorkOrders","status","getTechOrders","id","getStatuses","getWorkOrder","createWorkOrder","workOrder","post","operation","result","error","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\bingh\\source\\repos\\WorkOrderProject\\WorkOrderProject\\ClientApp\\src\\app\\work-order.service.ts"],"sourcesContent":["import { Inject, Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\nimport { WorkOrder } from './work-order';\nimport { Result } from './result';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WorkOrderService {\n  httpOptions = {\n    headers: new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    })\n  };\n  base?: string;\n\n  constructor(private http: HttpClient, @Inject('BASE_URL') baseUrl: string) { this.base = baseUrl; }\n\n\n  /**\r\n   * Retrieves all items from the workorder table\n   * @returns An `Obseverable` array of type `WorkOrder`\r\n   */\r\n  getWorkOrders(): Observable<WorkOrder[]> {\n    return this.http.get<WorkOrder[]>(this.base + \"workorder/getworkorders\", this.httpOptions).pipe(\n      catchError(this.handleError<WorkOrder[]>('getWorkOrders', []))\n    );\n  }\n\n  /**\r\n   * Retrieves the filtered work order list from the database by matching the\n   * status\n   * @param techId This will be the filter for the returned list\r\n   * @returns An `Obseverable` array of type `WorkOrder`\r\n   */\r\n  getFilteredWorkOrders(status: string): Observable<WorkOrder[]> {\n    return this.http.get<WorkOrder[]>(this.base + \"workorder/getworkordersbystatus?status=\" + status).pipe(\n      catchError(this.handleError<WorkOrder[]>('getFilteredWorkOrders', []))\n    );\n  }\n\n  getTechOrders(id: number): Observable<WorkOrder[]> {\n    return this.http.get<WorkOrder[]>(this.base + \"workorder/gettechorders?id=\" + id).pipe(\n      catchError(this.handleError<WorkOrder[]>('getTechOrders', []))\n    );\r\n  }\n\n  /**\r\n   * Retrieves a list of work order statuses\n   * available in the database\n   * @returns A string array of values if any are present\r\n   */\r\n  getStatuses(): Observable<string[]> {\n    return this.http.get<string[]>(this.base + \"workorder/getstatuses\").pipe(\n      catchError(this.handleError<string[]>('getStatuses', []))\n    );\n  }\n\n  /**\r\n   * \n   * @param id Serves as a filter to aid with web app routing\r\n   * @returns \r\n   */\r\n  getWorkOrder(id: number): Observable<WorkOrder> {\n    return this.http.get<WorkOrder>(this.base + 'workorder/getworkorder?id=' + id).pipe(\n      catchError(this.handleError<WorkOrder>('getWorkOrder woId = ${id}'))\n    );\n  }\n\n  createWorkOrder(workOrder: WorkOrder): void {\n    this.http.post<WorkOrder>(this.base + 'workorder/createneworder', this.httpOptions);\r\n  }\n\n  /**\r\n   * Handles errors from back-end requests to allow the app to still\n   * run without crashing\n   * @param operation\r\n   * @param result\r\n   * @returns\r\n   */\r\n  private handleError<T>(operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => { return of(result as T) };\n  } //code sourced from: https://angular.io/tutorial/tour-of-heroes/toh-pt6#heroes-and-http\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}